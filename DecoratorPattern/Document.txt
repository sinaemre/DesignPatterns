Decorator Pattern

Dekoratör deseni, sınıfta değişiklik yapmadan ilgili sınıfa dinamik olarak favranış eklememize izin vermektedir. Bu desen, yeni davranış eklerken, kod tabanınızda yani hali hazırda var olan kod bloğunuzda SOC(Seperation of Concerns(Yapılacak işlerin ayrılması)) ve OCP prensibine güçlü bir şekilde kullanmamıza izin verir. ancak aynı zaman size gerektiğinde davranış ekleme, kaldır yani modifikasyon işlemlerinde sizlere esneklik kazandırır.

Dekoratör kalıbının çalışma şekli şöyledir:
Önce davranış eklemek istediğiniz bir sınıfa sahip olmanız gerekir.Bu desnenin diyagramının ilgili sınıfa Bileşen adının vereceğin ve bu sınıf dekore etmek istediğimiz sınıfı temsil etmektedir. Bu sınıfın ara birimi uygulaması gereken veya dekoratör sınıflarımızın uygulayabileceği veya genişletilebileceği ortak bir temel sınıfı genişletmemiz yani modifiye etmemiz gerekir. Pratikte bir interface uzerinden concrte edilen bir arabirimi ile uygulamak daha mantıklı olacaktır. Ardından dekorator sınıfınız aynı ara birimi uygulayacaktır ve dekoratör sınıfınızdaki yöntem uygulamaları içine eklemek istediğiniz herhangi yeni davranışını tanımlayacaksınız, bu bir bileşen ise yeni bir sınıf açarak devam da edebilirsiniz. Eklenen yeni davranış inject ederke yolumuza devam ederiz. Ayrıca ijection için aynı arabirimi kullanan bir nesneyi alan dekoratör sınfınızda bir constructor tanımlanamanız gerekmektedir. Bu yapı ile dekore edilen bir nesneyi dekoratör deseninize geçirmenize ve nihayetinden dekoratör nesnesinin ham halinin bozulmamasının önüne geçmiş olursunuz. Çünkü ham hali yeni dekora edilecek nesneler için hazır halde kalmalıdır. Dekoratör nesnenin dekore edilen neseye bir referans verecektir, bu durumda üretilecek bileşen(component) nesnesi ve ardından gerektiğinde nesneye ve nesneden method çağrılarak kullanılabilir olmalıdır. 

Somut bir örnek üzerinden düşünürsek bir silah fabrikam olduğunu ve bu fabrikada M4 rifle ürettiğimi düşünelim. Üretilen bu standart assult tüfeklerini, client ihtiyaçları doğrultusunda oluşturduğu istekler ile modifiye etmektedir. Yani ham halde bulunan çalışan M4 tüfeğini gece yapılacak olan operasyona göre modifiye edilmesini örnek olarak verebiliriz. 

Dekoratör kelimesinin duyduğumuzda yukarıdaki örnek gibi bir fikir üzerinde düşünmek ve gerçekte yaptığınız işin birbirinin etrafını sarabilen ve gerektiği gibi davranış enjekte edilebilen bir dizi nesne tasarlamak olduğunu anlamakta fayda var. Bir dizi nesne dedinm çünkü aynı anda bir ya da birden fazla dekoratör nesnesini kullanabilirim. Yani herhangi bir sınırım bulunmamaktadır. Birden fazla dekoratör nesnesi tanımlayabilir ve kullanabilirsiniz, böylelikle orjinal nesneniz üzerinde farklı bir davranış ekleyebilir yada tanımlayabilir, bu nedenle SOC ve OCP presiplerine sıkı sıkıya uyduğunu söylemekte fayda var. Yine de tüm dekoratör sınıflarımızın orjinal nesnemiz ile aynı aranı arabirim uygulandığından, eklemek istediğimzi davranış için istemci kodunuzu değiştirmemiz gerekebilir. Bu husus dışında gayet güçlü ve kullanılabilir bir desendir.
